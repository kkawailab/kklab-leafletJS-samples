<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>07 - ポリラインを描画</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .description {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        #map {
            height: 500px;
            width: 100%;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .legend {
            margin-top: 15px;
            padding: 10px;
            background: #fff;
            border-radius: 5px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.1);
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        .legend-color {
            width: 30px;
            height: 4px;
            margin-right: 10px;
        }
        .code-section {
            margin-top: 20px;
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .code-section pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>07 - ポリラインを描画</h1>
        <div class="description">
            <p><strong>学習内容:</strong> 地図上に線（ポリライン）を描画してルートや経路を表現します。</p>
            <p><strong>ポイント:</strong></p>
            <ul>
                <li>L.polyline() で座標の配列から線を作成</li>
                <li>weight で線の太さ、dashArray で破線を設定</li>
                <li>複数の線をマルチポリラインとして描画可能</li>
            </ul>
        </div>

        <div id="map"></div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: red;"></div>
                <span>山手線（実線）</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: blue; border-top: 2px dashed blue; height: 0;"></div>
                <span>中央線（破線）</span>
            </div>
        </div>

        <div class="code-section">
            <pre>
// 基本的なポリライン
const yamanoteLine = L.polyline([
    [35.6812, 139.7671],  // 東京
    [35.7141, 139.7774],  // 上野
    [35.7281, 139.7710],  // 日暮里
    [35.7321, 139.7090]   // 池袋
], {
    color: 'red',
    weight: 4,
    opacity: 0.8
}).addTo(map);

// 破線のポリライン
const chuoLine = L.polyline([...], {
    color: 'blue',
    weight: 3,
    dashArray: '10, 10'  // 10px線、10px空白
}).addTo(map);
            </pre>
        </div>
    </div>

    <!-- Leaflet.js本体を読み込む -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // ========================================
        // ポリライン（線）を描画するサンプル
        // ルートや経路の表現に最適
        // ========================================

        // 地図を初期化
        const map = L.map('map').setView([35.6900, 139.7400], 12);

        // タイルレイヤーを追加
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // ----------------------------------------
        // 山手線風のポリライン（実線）
        // ----------------------------------------
        // 座標の配列を定義（駅の位置を順番に並べる）
        // ポリゴンと違い、自動的に閉じないので最後に始点を追加
        const yamanotePoints = [
            [35.6812, 139.7671],  // 東京
            [35.6917, 139.7703],  // 神田
            [35.6983, 139.7731],  // 秋葉原
            [35.7141, 139.7774],  // 上野
            [35.7281, 139.7710],  // 日暮里
            [35.7321, 139.7090],  // 池袋
            [35.7057, 139.6849],  // 目白
            [35.6896, 139.7006],  // 新宿
            [35.6580, 139.7016],  // 渋谷
            [35.6302, 139.7407],  // 大崎
            [35.6284, 139.7387],  // 品川
            [35.6456, 139.7478],  // 田町
            [35.6558, 139.7567],  // 浜松町
            [35.6657, 139.7580],  // 新橋
            [35.6750, 139.7637],  // 有楽町
            [35.6812, 139.7671]   // 東京（戻る）← 環状線なので始点に戻す
        ];

        // L.polyline() でポリラインを作成
        const yamanoteLine = L.polyline(yamanotePoints, {
            color: 'red',     // 線の色
            weight: 4,        // 線の太さ（ピクセル）
            opacity: 0.8      // 線の不透明度（0〜1）
        }).addTo(map).bindPopup('山手線（イメージ）');

        // ----------------------------------------
        // 中央線風のポリライン（破線）
        // ----------------------------------------
        const chuoPoints = [
            [35.6812, 139.7671],  // 東京
            [35.6917, 139.7703],  // 神田
            [35.6984, 139.7730],  // 御茶ノ水
            [35.7023, 139.7441],  // 水道橋
            [35.7015, 139.7319],  // 飯田橋
            [35.7051, 139.7191],  // 市ヶ谷
            [35.6894, 139.7042],  // 四ツ谷
            [35.6896, 139.7006],  // 新宿
            [35.7074, 139.6492],  // 中野
            [35.7048, 139.5803]   // 荻窪
        ];

        // dashArray で破線パターンを指定
        // '10, 10' は「10pxの線、10pxの空白」の繰り返し
        const chuoLine = L.polyline(chuoPoints, {
            color: 'blue',
            weight: 3,
            opacity: 0.8,
            dashArray: '10, 10'  // 破線パターン（線の長さ, 空白の長さ）
        }).addTo(map).bindPopup('中央線（イメージ・破線）');

        // ----------------------------------------
        // 点線のポリライン
        // ----------------------------------------
        // dashArray を調整することで様々なパターンが作れる
        // '5, 15' は「5pxの線、15pxの空白」→ 点線風になる
        const dottedLine = L.polyline([
            [35.6580, 139.7016],  // 渋谷
            [35.6440, 139.6980],
            [35.6280, 139.7160]
        ], {
            color: 'green',
            weight: 4,
            dashArray: '5, 15'  // 点線風パターン
        }).addTo(map).bindPopup('点線スタイル');

        // ヒント: ポリラインの範囲にズームするには
        // map.fitBounds(yamanoteLine.getBounds());
    </script>
</body>
</html>
